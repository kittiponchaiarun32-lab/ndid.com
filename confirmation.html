<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</title>
  <style>
    /* Enhanced premium styling */
    :root{--card-bg:#fff;--muted:#6b6b6b;--accent:#667eea;--accent-light:#764ba2}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:'Inter', '-apple-system', 'Segoe UI', 'Roboto', sans-serif;-webkit-font-smoothing:antialiased}
    body{background:linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #4facfe 75%, #00f2fe 100%);background-size:400% 400%;animation:gradientShift 15s ease infinite;display:flex;align-items:flex-start;justify-content:center;min-height:100vh;overflow-x:hidden;padding:40px 20px}
    
    @keyframes gradientShift{
      0%{background-position:0% 50%}
      50%{background-position:100% 50%}
      100%{background-position:0% 50%}
    }

    /* centered card with premium design */
    .card{max-width:540px;width:100%;background:var(--card-bg);border-radius:16px;padding:32px;box-shadow:0 20px 60px rgba(0,0,0,0.25), inset 0 1px 0 rgba(255,255,255,0.6);border:1px solid rgba(255,255,255,0.4);animation:slideUp 0.5s cubic-bezier(0.34,1.56,0.64,1)}

    @keyframes slideUp{
      from{opacity:0;transform:translateY(20px)}
      to{opacity:1;transform:translateY(0)}
    }

    .title{font-size:22px;color:#1a1a1a;font-weight:800;margin:0 0 6px;letter-spacing:-0.5px}
    .subtitle{font-size:13px;color:#888;margin:0 0 24px;line-height:1.5}

    /* Summary sections */
    .summary-section{margin-bottom:20px}
    .section-title{font-size:13px;color:#667eea;font-weight:700;margin:0 0 12px;letter-spacing:0.3px;text-transform:uppercase}
    .summary-item{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid #f0f0f0;font-size:14px}
    .summary-item:last-child{border-bottom:none}
    .summary-label{color:#666;font-weight:500}
    .summary-value{color:#1a1a1a;font-weight:700}

    /* Info box */
    .info-box{
      padding:14px;
      background:#f0f4ff;
      border-radius:10px;
      border-left:4px solid #667eea;
      margin-bottom:20px;
    }

    .info-box p{
      margin:0;
      font-size:12px;
      color:#333;
      line-height:1.5;
    }

    /* Organization info */
    .org-info{
      padding:16px;
      background:#f9f9f9;
      border-radius:10px;
      margin-bottom:16px;
      text-align:center;
    }

    .org-logo{
      width:60px;
      height:60px;
      margin:0 auto 12px;
      background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius:12px;
      display:flex;
      align-items:center;
      justify-content:center;
      color:#fff;
      font-size:28px;
    }

    .org-name{
      font-size:14px;
      font-weight:700;
      color:#1a1a1a;
      margin:0 0 6px;
    }

    .org-contact{
      font-size:12px;
      color:#666;
      margin:0;
    }

    /* Product grid */
    .product-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
      margin-bottom:16px;
    }

    .product-item{
      padding:12px;
      background:#f9f9f9;
      border-radius:10px;
      border:1px solid #e0e0e0;
      text-align:center;
      font-size:12px;
    }

    .product-item strong{
      display:block;
      color:#667eea;
      font-weight:700;
      margin-bottom:4px;
    }

    .product-item span{
      color:#666;
      font-size:11px;
    }

    /* Bank logos */
    .bank-logos{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-bottom:16px;
      justify-content:center;
    }

    .bank-logo{
      width:50px;
      height:35px;
      background:#f0f0f0;
      border-radius:6px;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:10px;
      color:#999;
      font-weight:700;
      border:1px solid #e0e0e0;
    }

    /* Actions */
    .actions{display:flex;justify-content:space-between;gap:12px;margin-top:28px}
    .btn{border:0;padding:12px 18px;border-radius:10px;font-weight:700;cursor:pointer;transition:all 0.3s cubic-bezier(0.34,1.56,0.64,1);font-size:14px;letter-spacing:0.3px}
    .btn.ghost{background:#f5f5f5;color:#333;border:1px solid #e0e0e0;box-shadow:0 2px 6px rgba(0,0,0,0.04)}
    .btn.ghost:hover{background:#efefef;box-shadow:0 4px 12px rgba(0,0,0,0.08);transform:translateY(-1px)}
    .btn.primary{background:linear-gradient(135deg, #ffd24d 0%, #f2b705 100%);color:#111;box-shadow:0 6px 20px rgba(242,183,5,0.4);font-weight:800}
    .btn.primary:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(242,183,5,0.5)}
    .btn.primary:active{transform:translateY(0);box-shadow:0 4px 12px rgba(242,183,5,0.3)}

    /* responsive */
    @media (max-width:600px){
      body{padding:20px 16px}
      .card{padding:24px}
      .product-grid{grid-template-columns:1fr}
      .bank-logos{gap:6px}
      .bank-logo{width:45px;height:32px;font-size:9px}
    }
  </style>
</head>
<body>
  <main class="card" role="main" aria-labelledby="cardTitle">
    <h1 id="cardTitle" class="title">‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£</h1>
    <p class="subtitle">‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠</p>

    <!-- Organization Info -->
    <div class="org-info">
      <div class="org-logo">üè¢</div>
      <div class="org-name">‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡∏£‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ù‡∏≤‡∏Å</div>
      <div class="org-contact">üìû 1158 | üìß info@dpa.or.th</div>
    </div>

    <!-- Summary of selections -->
    <div class="summary-section">
      <div class="section-title">üìã ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</div>
      <div id="summaryContent" style="font-size:13px;color:#333;line-height:1.6">
        <div style="padding:10px;background:#f9f9f9;border-radius:8px">
          <div><strong>‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:</strong></div>
          <div id="docsSummary" style="margin-top:6px;color:#666"></div>
          <div style="margin-top:10px;border-top:1px solid #e0e0e0;padding-top:10px"><strong>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô:</strong></div>
          <div id="benefitSummary" style="margin-top:6px;color:#666"></div>
          <div style="margin-top:12px;border-top:1px dashed #e6e6e6;padding-top:10px">
            <strong>‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏ù‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏ö:</strong>
            <div id="accountsSummary" style="margin-top:8px;color:#666">-</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Document Info Summary -->
    <div class="summary-section">
      <div class="section-title">üë§ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•</div>
      <div class="summary-item">
        <span class="summary-label">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</span>
        <span class="summary-value" id="fullNameSummary">-</span>
      </div>
      <div class="summary-item">
        <span class="summary-label">‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î</span>
        <span class="summary-value" id="birthDateSummary">-</span>
      </div>
      <div class="summary-item">
        <span class="summary-label">‡πÄ‡∏•‡∏Ç‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß</span>
        <span class="summary-value" id="idCardSummary">-</span>
      </div>
      <div class="summary-item">
        <span class="summary-label">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</span>
        <span class="summary-value" id="emailSummary">-</span>
      </div>
    </div>

    <!-- Info Box -->
    <div class="info-box">
      <p>‚ú® ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™‡πÅ‡∏•‡∏∞‡∏õ‡∏Å‡∏õ‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ 100%</p>
    </div>

    <!-- Bank Partners -->
    <div class="summary-section">
      <div class="section-title">üè¶ ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏û‡∏±‡∏ô‡∏ò‡∏°‡∏¥‡∏ï‡∏£</div>
      <div class="bank-logos" id="bankLogos">
        <div class="bank-logo">BBL</div>
        <div class="bank-logo">KBANK</div>
        <div class="bank-logo">TMB</div>
        <div class="bank-logo">SCB</div>
        <div class="bank-logo">UOB</div>
        <div class="bank-logo">SME</div>
      </div>
    </div>

    <!-- Disclaimer -->
    <div style="padding:12px;background:#fff3cd;border-radius:10px;border-left:4px solid #ffc107;margin-bottom:20px">
      <p style="margin:0;font-size:12px;color:#333;line-height:1.5">
        ‚ö†Ô∏è ‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ô‡∏µ‡πâ ‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏≤‡∏°‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß
      </p>
    </div>

    <!-- Actions -->
    <div class="actions">
      <button type="button" class="btn ghost" onclick="window.location.href='doc-select.html'">üìù ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà</button>
      <button type="button" id="btnConfirm" class="btn primary" onclick="confirmSubmission()">‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£</button>
    </div>
  </main>

  <script>
    const selectedDocsKey = 'selected_docs';
    const selectedBenefitKey = 'selected_benefit';
    const formKey = 'document_info';

    // Benefit labels mapping
    const benefitLabels = {
      'DPA': 'üì± ‡∏ú‡∏•‡∏¥‡∏ï‡∏†‡∏±‡∏ì‡∏ë‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏†‡∏±‡∏¢ DPA',
      'Health': 'üè• ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏Ñ‡∏£‡∏ö‡∏Ñ‡∏£‡∏±‡∏ô',
      'Life': '‚ù§Ô∏è ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏™‡∏π‡∏á',
      'Other': '‚úèÔ∏è ‡∏≠‡∏∑‡πà‡∏ô‡πÜ'
    };

    // Load and display all summary data
    function loadSummary(){
      try{
        // Load documents
        const docs = JSON.parse(localStorage.getItem(selectedDocsKey) || '[]');
        if(docs.length > 0){
          document.getElementById('docsSummary').innerHTML = docs.map(doc => `‚Ä¢ ${doc}`).join('<br>');
        }

        // Load benefit
        const benefit = localStorage.getItem(selectedBenefitKey);
        if(benefit){
          document.getElementById('benefitSummary').innerHTML = benefitLabels[benefit] || benefit;
        }

        // Load document info
        const docInfo = JSON.parse(localStorage.getItem(formKey) || '{}');
        if(docInfo.firstName && docInfo.lastName){
          document.getElementById('fullNameSummary').textContent = `${docInfo.firstName} ${docInfo.lastName}`;
        }
        if(docInfo.birthDate){
          document.getElementById('birthDateSummary').textContent = formatDate(docInfo.birthDate);
        }
        if(docInfo.idCard){
          document.getElementById('idCardSummary').textContent = docInfo.idCard;
        }
        if(docInfo.email){
          document.getElementById('emailSummary').textContent = docInfo.email;
        }
        // Load attached bank accounts
        const accounts = JSON.parse(localStorage.getItem('bank_accounts') || '[]');
        if(accounts && accounts.length){
          document.getElementById('accountsSummary').innerHTML = accounts.map((a,i)=>`<div>‚Ä¢ ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏•‡πà‡∏°‡∏ó‡∏µ‡πà ${i+1}: ${a.bank || '-'} (${a.depositType||'-'}) ‚Äî ‡∏¢‡∏≠‡∏î: ${a.balance||'-'}</div>`).join('');
        } else {
          document.getElementById('accountsSummary').textContent = '-';
        }
      }catch(e){
        console.error(e);
      }
    }

    // Format date for display
    function formatDate(dateStr){
      try{
        const date = new Date(dateStr + 'T00:00:00');
        return date.toLocaleDateString('th-TH', { year: 'numeric', month: 'long', day: 'numeric' });
      }catch(e){
        return dateStr;
      }
    }

    // Confirm submission
    function confirmSubmission(){
      try{
        const docs = JSON.parse(localStorage.getItem(selectedDocsKey) || '[]');
        const docInfo = JSON.parse(localStorage.getItem(formKey) || '{}');
        
        if(!docs.length || !docInfo.firstName || !docInfo.lastName){
          alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
          return;
        }

        // Get bank accounts attached
        const bankAccounts = JSON.parse(localStorage.getItem('bank_accounts') || '[]');

        // Create submission record (include attached bank accounts)
        const submission = {
          id: 'SUB-' + Date.now(),
          timestamp: new Date().toISOString(),
          documents: docs,
          benefit: localStorage.getItem(selectedBenefitKey),
          personalInfo: docInfo,
          bankAccounts: bankAccounts,
          status: 'confirmed'
        };

        // Save submission
        let submissions = JSON.parse(localStorage.getItem('submissions') || '[]');
        submissions.push(submission);
        localStorage.setItem('submissions', JSON.stringify(submissions));

        alert('‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!\n\nID: ' + submission.id + '\n\n‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß');
        
        // Clear form data after submission (also clear attached bank accounts)
        localStorage.removeItem(selectedDocsKey);
        localStorage.removeItem(selectedBenefitKey);
        localStorage.removeItem(formKey);
        localStorage.removeItem('bank_accounts');
        
        // Navigate to doc-select to start new submission
        window.location.href = 'doc-select.html';
      }catch(e){
        console.error(e);
        alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ' + e.message);
      }
    }

    // Load summary on page load
    loadSummary();
  </script>
</body>
</html>
